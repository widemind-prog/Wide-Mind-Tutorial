{% extends "base.html" %}
{% block title %}Admin - Materials{% endblock %}

{% block content %}
<div class="admin-box">
    <h2>Upload Course Materials</h2>

    <form action="/admin/materials/upload" method="POST" enctype="multipart/form-data">
        <select name="course_id" required>
            <option value="">Select Course</option>
            {% for course in courses %}
            <option value="{{ course.id }}">
                {{ course.course_code }} - {{ course.course_title }}
            </option>
            {% endfor %}
        </select>

        <select name="file_type" required>
            <option value="">File Type</option>
            <option value="audio">Audio</option>
            <option value="pdf">PDF</option>
        </select>

        <input type="file" name="file" required>

        <button type="submit">Upload Material</button>
    </form>

    <p>{{ message }}</p>

    <hr>

    <h3>Existing Materials</h3>
    <ul class="admin-list">
        {% for material in materials %}
        <li>
            {{ material.course_title }} - {{ material.file_type }}
            <br>
            <button onclick="deleteMaterial({{ material.id }})">Delete</button>
        </li>
        {% endfor %}
    </ul>
</div>

<script>
function deleteMaterial(id) {
    if (!confirm("Delete this material?")) return;
    fetch(`/admin/materials/delete/${id}`, {method: "POST"})
        .then(() => location.reload());
}
</script>
{% endblock %}