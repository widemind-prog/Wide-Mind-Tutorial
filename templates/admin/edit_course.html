{% extends "base.html" %}
{% block title %}Edit Course{% endblock %}

{% block content %}
<h1 class="dashboard-title">Edit Course</h1>

<!-- COURSE DETAILS -->
<form method="POST" class="admin-box">
    <label>Course Code</label>
    <input type="text" name="course_code" value="{{ course.course_code }}" required>

    <label>Course Title</label>
    <input type="text" name="course_title" value="{{ course.course_title }}" required>

    <label>Description</label>
    <textarea name="description" rows="4">{{ course.description }}</textarea>

    <button type="submit">Save Changes</button>
</form>

<!-- EXISTING MATERIALS -->
<div class="admin-box">
    <h3>Existing Materials</h3>
    {% if materials %}
    <ul>
        {% for material in materials %}
        <li>
            <strong>{{ material.title or material.filename }}</strong> ({{ material.file_type }})
            <form method="POST" action="/admin/courses/material/delete/{{ material.id }}" style="display:inline;">
                <button type="submit" onclick="return confirm('Delete this file?')" style="background:#a00000;">
                    Delete
                </button>
            </form>
        </li>
        {% endfor %}
    </ul>
    {% else %}
    <p>No materials uploaded yet.</p>
    {% endif %}
</div>

<!-- ADD PDF -->
<div class="admin-box">
    <h3>Add PDF Material</h3>
    <form method="POST" action="/admin/courses/material/add/pdf/{{ course.id }}" enctype="multipart/form-data">
        <label>Title:</label>
        <input type="text" name="title" placeholder="Enter PDF title" required>
        <input type="file" name="pdf" accept=".pdf" required>
        <button type="submit">Upload PDF</button>
    </form>
</div>

<!-- ADD AUDIO -->
<div class="admin-box">
    <h3>Add Audio Material</h3>
    <form method="POST" action="/admin/courses/material/add/audio/{{ course.id }}" enctype="multipart/form-data">
        <label>Title:</label>
        <input type="text" name="title" placeholder="Enter Audio title" required>
        <input type="file" name="audio" accept="audio/*" required>
        <button type="submit">Upload Audio</button>
    </form>
</div>

<a href="/admin/courses" class="back-login-btn">‚Üê Back to Courses</a>
<!-- Toast for admin actions -->
<div id="admin-toast" class="toast"></div>

<script src="/static/js/admin.js"></script>

{% endblock %}
