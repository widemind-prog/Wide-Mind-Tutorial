{% extends "base.html" %}

{% block title %}{{ course.course_code }} - {{ course.course_title }}{% endblock %}

{% block content %}

<h2>{{ course.course_code }} - {{ course.course_title }}</h2>

{% if audios %}
  <h3>Audio Lessons üéß</h3>
  <ul>
    {% for audio in audios %}
      <li>
        <p>{{ audio.title or audio.filename }}</p>
        <audio id="audio-{{ audio.id }}" controls controlsList="nodownload">
          <source src="/stream/audio/{{ audio.id }}" type="audio/mpeg">
          Your browser does not support the audio element.
        </audio>
      </li>
    {% endfor %}
  </ul>
{% endif %}

{% if pdfs %}
  <h3>PDF Lessons üìù</h3>
  <ul>
    {% for pdf in pdfs %}
      <li>
        <a href="/course/{{ course.id }}/pdf" target="_blank">
          {{ pdf.title or pdf.filename }}
        </a>
      </li>
    {% endfor %}
  </ul>
{% endif %}

<script>
document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll("audio").forEach(audio => {
        // Disable right-click
        audio.addEventListener("contextmenu", e => e.preventDefault());
        // Disable dragging
        audio.addEventListener("dragstart", e => e.preventDefault());
        // Hide download button (modern browsers)
        audio.controlsList = "nodownload";
    });
});
</script>

{% endblock %}