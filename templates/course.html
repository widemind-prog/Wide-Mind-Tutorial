{% extends "base.html" %}
{% block content %}

<h1>Available Courses</h1>

{% for item in courses %}
<div class="course-box">
    <h2>{{ item.course.course_code }} - {{ item.course.course_title }}</h2>
    <p>{{ item.course.description }}</p>

    {% set audios = item.materials | selectattr("file_type", "equalto", "audio") | list %}
    {% set pdfs = item.materials | selectattr("file_type", "equalto", "pdf") | list %}

    <div class="materials-section">

        {% if audios %}
        <div class="materials-box">
            <h3>Audio Sessions</h3>
            <ul>
                {% for audio in audios %}
                <li>
                    <strong>{{ audio.title }}</strong>
                    <audio
                        controls
                        controlsList="nodownload"
                        src="/stream/audio/{{ audio.id }}">
                        Your browser does not support the audio element.
                    </audio>
                </li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}

        {% if pdfs %}
        <div class="materials-box">
            <h3>PDF Materials</h3>
            <ul>
                {% for pdf in pdfs %}
                <li>
                    <strong>{{ pdf.title }}</strong>
                    <a class="btn" href="/stream/pdf/{{ pdf.id }}" target="_blank">
                        Open PDF üìù
                    </a>
                </li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}

    </div>
</div>
{% endfor %}

<style>
.course-box {
    border: 1px solid #ddd;
    padding: 20px;
    border-radius: 10px;
    margin-bottom: 25px;
    background: #fafafa;
}

.materials-section {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.materials-box {
    border: 1px solid #ccc;
    padding: 15px;
    border-radius: 8px;
    background: #f9f9f9;
}

.materials-box h3 {
    margin-top: 0;
}

.materials-box ul {
    list-style: none;
    padding-left: 0;
}

.materials-box li {
    margin-bottom: 10px;
}
</style>

<script src="/static/js/course.js"></script>
{% endblock %}